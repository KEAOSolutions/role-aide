---

- name: ensure packages are installed
  yum:
    name='{{ item }}'
    state='{{ aide_packages_state }}'
    disable_gpg_check='{{ aide_packages_disable_gpg_check }}'
    update_cache='{{ aide_packages_update_cache }}'
    validate_certs='{{ aide_packages_validate_certs }}'
  with_flattened:
    - '{{ aide_packages_list }}'



- name: deploy configuration file
  template:
    mode='{{ aide_config_file_mode }}'
    owner='{{ aide_config_file_owner }}'
    group='{{ aide_config_file_group }}'
    dest='{{ aide_config_file_dest }}'
    src='{{ aide_config_file_src }}'
    backup='{{ aide_config_file_backup }}'
    validate='{{ aide_config_file_validate }}'


- name: ensure log directory is available
  file:
    dest='{{ aide_config_dir_log_path }}'
    owner='{{ aide_config_dir_log_owner }}'
    group='{{ aide_config_dir_log_group }}'
    mode='{{ aide_config_dir_log_mode }}'
    state='{{ aide_config_dir_log_state }}'


- name: ensure db directory is available
  file:
    dest='{{ aide_config_dir_db_path }}'
    owner='{{ aide_config_dir_db_owner }}'
    group='{{ aide_config_dir_db_group }}'
    mode='{{ aide_config_dir_db_mode }}'
    state='{{ aide_config_dir_db_state }}'
